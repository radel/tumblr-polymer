<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-shared-lib/core-shared-lib.html">
<link rel="import" href="../../bower_components/core-image/core-image.html">
<!-- <polymer-element name="tumblr-model" attributes="info">
  <template>
    <link rel="stylesheet" href="yo-greeting.css">
<core-shared-lib url="http://api.tumblr.com/v2/blog/tumblr.bazinga.it/info?api_key=pKxlLiDDWHpPaZeed9Vq9BaO8fxtSL4lc8Qeyve5Q0r13hF6aQ&callback=%%callback%%" auto on-core-shared-lib-load="{{ajaxResp}}"></core-shared-lib>
  </template>

  <script>
    (function () {
      Polymer({
        ready: function () {
          _this = this;
          _this.info = [];
        },

        ajaxResp: function (e) {
          _this.info = e.detail[1][0].response.blog;
        }
      });
    })();
  </script>
</polymer-element> -->



<polymer-element name="posts-model" attributes="posts info">
  <template>
    <link rel="stylesheet" href="yo-greeting.css">
<core-shared-lib url="http://api.tumblr.com/v2/blog/tumblr.bazinga.it/posts?api_key=pKxlLiDDWHpPaZeed9Vq9BaO8fxtSL4lc8Qeyve5Q0r13hF6aQ&callback=%%callback%%" auto on-core-shared-lib-load="{{ajaxPostResp}}"></core-shared-lib>

<div>
      <template repeat="{{s in posts}}">
          <a href="{{s.post_url}}">
            <template repeat="{{photo in s.photos}}">
            <core-image style="width:300px; height:300px;" sizing="cover"
              src="{{photo.alt_sizes[2].url}}"></core-image>
            </template>
          </a>
      </template>
    </div>

</template>

  <script>
    (function () {
      Polymer({
        ready: function () {
          _this = this;
          _this.posts = [];
          _this.info = [];
        },

        ajaxPostResp: function (e) {
          _this.info = e.detail[1][0].response.blog;
          _this.posts = e.detail[1][0].response.posts;
        }
      });
    })();
  </script>
</polymer-element>
